(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(4)),i=n(18),c=(u(n(203)),u(n(35)));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.connectToSocket=function(){var e=io("https://ws-api.iextrading.com/1.0/last"),t=[];for(var o in n.props.portfolio)t.push(n.props.portfolio[o].symbol);e.on("connect",(function(){t.forEach((function(t){e.emit("subscribe",t)}))})),e.on("message",(function(e){n.props.handleSocketMessage(JSON.parse(e))})),n.setState({socket:e,portfolioSize:Object.keys(n.props.portfolio).length})},n.state={},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.props.portfolio).length===this.state.portfolioSize){e.next=6;break}return e.next=5,this.state.socket.close();case 5:this.connectToSocket();case 6:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function o(r,i){try{var c=e[r](i),u=c.value}catch(e){return void n(e)}if(!c.done)return Promise.resolve(u).then((function(e){o("next",e)}),(function(e){o("throw",e)}));t(u)}("next")}))},function(){return i.apply(this,arguments)})},{key:"componentDidMount",value:function(){this.connectToSocket()}},{key:"render",value:function(){return r.default.createElement("div",{style:{height:"0",width:"0"}})}}]),t}(r.default.Component);t.default=(0,i.connect)((function(e){return{portfolio:e.Portfolio_state.portfolio}}),(function(e){return{handleSocketMessage:function(t){return e(c.default.handleSocketMessage(t))}}}))(a)}}]);
//# sourceMappingURL=2.3438b1e5e023b80c210a.js.map